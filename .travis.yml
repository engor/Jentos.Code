language: cpp
compiler:
  - gcc
install:
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then
         sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
      && sudo apt-get update -qq
      && sudo apt-get install qt5-default libqt5webkit5-dev qtdeclarative5-dev sshpass
      ;
    else
         brew update
      && brew install https://raw.githubusercontent.com/kadwanev/bigboybrew/master/Library/Formula/sshpass.rb
      && brew install qt5
      && brew link --force sshpass
      && brew link --force qt5
      ;
    fi
script:
  - mkdir release
  - cd release
  - qmake -makefile -o Makefile ../jentos_ide.pro -r
  - make
  - make clean
os:
  - linux
  - osx
env:
    global:
      - secure: "cjShmZqMGQcGmstN+LeCK7T2/IBOYjFHASEG4orzio38oeDWLHfr5dDJrt32PWk/UjLW2hU+7+5CUaAymXQxhrNCRPkHqodULCO1F0Avs+jKnxVudQe9hJDWYx5RQs6jZKt1xOruVFE8XkU4E3jgCSjfYQu3MZkADya6jp6YzE5Yq5y5Hy5MXAhx7nPEaPE1276JqckWoZwMl3lfWdQxesgDTaPFc94cidUxYSHtVCjuiHiGgewZ5jr6T4MI9mJYu8S02tkbiYDTKCngnVLn/wHtmXpmX5wiaooqSYtRbjp/c5OQs+S2PSXN5051egLhUwveJk6u5MZ0A1gQgTOW+0BOY9Om63PFQye1lcUlSemT/KYSLeHWzVN549qGu5ou00Q0vzMUAAUYGNzSAv53CEOlZwvh24z3VnHnGhMcEVqZc6PWKa1m/O3LAxgOzudV2QzQhOhuTfkLFY/kUpmrKvy+OM9ku7iNQyOGDp2i5APMMw2oEe2ho/6IJ8uQot7RH1mvjN3eAlhReveY63W9X0JeNXwgdKLb30PppWOOeP+7vXMTtygO8bQ6liGQuGjxmK87ND6EnkrLqbDxT1wewTyHw5F4CzOOYsCkGK89+j3OXpqAwu9Ij/IvI5By0CflplJXmr/XMgCIgAobFOaKIGXCIzgVzyx3/SUMX1l15AE="
      - secure: "jpGwVBhbSikHrS6fYKS13q7ctvZ9motGTHVCqv2Yf41Uf0jqer3WjDanCPL37+DLKlDZOk8tsO1lVzLRggG5CFho2wYT+avu2E+GLhZQCmf/lWdUudNzSipVyFsv1afAc/SJ0qa7q6k9iWV5Ve+/72Fq32YJJEFN4CZ/AYOUdY2Cu4JzatfhwraRY8ljebjswVZyqkfH05EK8hVJJgbh3QkdzxNhJjlvGHMwSpvtUgKRxOUKfbSnf9Xdy++B1AyaBdlUzTwT5Z67Uj1CaU6A2qhzsjxniJc07sdkjo5zxW1hn5SQyQN7JWIF17Rs1hcfJCKjQ/fJYaYPhcmNGuGK5wqgL5dFSXwB6eut6tmnVPyXzNxrn7eIHFY6/yS8UHwYHqRx4K4XBV8Inobsc3sH5QA8WmL7syz24ujgbHOqui1xVfbiyzEbktyuVtwWhIpJkbM9UGECJEz/w7mOs2fGfOwWskSNj07nPb4IXqwO33hqM+MxkLHlvsMAJDO9V8G2Ur1+rgjEeRe7TBguowaim0itKXezggv0a1I3H6urqpdf8VZbRmPuepRsLBAlXhjgu+ABILvIKntPat6zpMWhMXl/Z5WsJeOraT20HUhf05VY/Nc/ecPgomuTbPmtROvdPxSTe/NcW4gVgtY7zlvRDwZMf265HciLl0ogAoEjHnk="
      - secure: "nD7NIRek41XfTxfrX2J4w4JqLg0JfD5s2YUsLPgHawyODkHR5bAsNzgE0zMueV0fURunMzJurDI/RtL23aWpfvyX6OM1ieGRFoisewsGkMqT5WeaGPK72nQFdcA51GuW5tNtxN3bmKMBwf5NTASvAZS7C3Zeu4forSK1ma2Y5khtsYgnWqOWhT8dGhkKaGa765I9OclYh/XAh50+PE259oD2igU4tI2xbN+eeY8tG8ld7Nm59suiYSaVaLIWe+l1s/xTrYdcCqpXTyg/I+0yVGJZ/ulO6gabz0sim9/ewOiJnLsXmkuVdhFsar5/YLKFJz2eSae1RR5ROIDFL9CMH5eLMu4xgAiMeRzXQIEoPuxZbJPMweHrDrtyH7st3kDE4FQz9LpfMBO5u6IcJRLyi7tB+iKIhrRcRjVwXfBM+46RuER0CmLSKliLS1GzKMXKUKrLmD6tYa63mYyad7u2aEzHPazYwXQ3VstQL2XkgE7xjk/ZQw/7O0YXIg83ucZ3iNoGfvygcbgZ3Z9TEgb7yIu4xKIG9xpKHx4JQYXsJiQ8am6Zq1Dgol3rGZ5mYagtpbr6Yc7xr0iBbhx+UT/BzztP+8NsaN3z0X2nFiI4JzpMFBvydOr/krqvOUvWwrP47myulBDNTbUlf98aSpC8WVBC2eUwQzK8oBQ4UEOcvcc="
      - secure: "U4AYmCxgKefIhIgFKqIBZ0S+3taCs3gm33DzYOnkHxym1ZptKEWP20lOb7S8jDkUJ3IFcYdO0+oNW7C5BlTVYFDKbrX2eprBLnYE6Fzxl6pmVlSbIo0n7/t+Nx0vcorP6z9WXpHgZMA9vBN7CeGgkTpKPVSQdBxH2djPGlzzTwlVTfla4zy+Pt0FGyuHIgkA7WGI9EUGBiV4VSC7l2FgRlHPoMnRo434Vxtv7YChfXhZqBlM9Z9+8pG+3VIYKXm0PTaENjlYdDsSIpYx+1t7ReVRdphoUN1o5lAChRwDFLZS2XROvFZeQDSDsUdvzT2Chrkmw6QXa99MVsRYLLL8Sbf2/M32fsQq7sm0qvTiKqGTVgyCjYQiU8HjoUN++es9Al7jRSPu/LC66kZWRLzNl25fVGcs2ke2ZBk/1FxUdX00K7Xu33vhUCnLdeoXsrkaQ5mQsizReF9mkSg8XoMBihEzOVhQwINukdywSGkMzMDcIPNwxQ+osjvWOkvlXECRyEFCSZW5U64gNAsthRVBwmx1uyJ8Hn4rWpKfr0607F+dlMWWVa/Fw+/g0b1A3fpuo6kRi6KUoiIh6YQtgl6VOFKnJ98T6Nz9B2PAygI7eyqSwYy8AzP8gIYmA0vzMknudfVqnH8r5a1bVsxUOE4Mkx+GGP/T/uzR239ALtXZLgc="
      - secure: "id1cZTexfeUoTd3PSgg/+H9AH7MXDhJfQYDHCnRTnYwOfhSX5/WbTHMo+xgGuKn/3HdqOfgildrxbZ2dXC7wXIpJSoHMSt0pkK5grQBafIe9PpF5V6r41ntnyZoGavuYz7jcsk1mOxt3/FZhmOGSPUDIU8Iv70q+a5i11s3qMSaggn4iOVXQs23QpZ5xMHoLs5YgmP0kBwG9F90noxb0CaFuehl34ah5JYaQUrdEJ5B+gSKgmMXYarGZWHEdK8p2AZT/3VNmtEQIkVlsNKwt6ftUKBs2NsaqbPfOyZvaDXwThAz+WxhuAGBi27Ai7ZsPUQ7nneoltm8d+h5XZPR8Ios8q1iiF4kHzVn5DqtJIBp5/RwVnpdHzn/qK0pknTJiSOzfgkaeIfj8z6Ty2Y5MAmeqdChBZNWf2Ug/3vuQQTbS0Bjt9rw8KMe7frXINisa3XX63GDwlRn276T7BqzY0YE3Fgq9+JnywgfeKnUK8QPMQb+nGByfp4WOC6hWP+h8f/SRvLOFYzgIWIGOS+ruBAxB583MoKIO1pU9BJ0i4f9QqF6JawTZpUJh/9V5kM2wNXjfqIxS4fL4UaB80HHgDRvfAfLDRV0ZdNUOM7H9n2BjJ7DKLrje6E9D7ssLFJTJusvDIIuEUfuV97MXw5RzyeMkM8D4hfWKujPdQtCrJWQ="
after_success:
  - cd $TRAVIS_BUILD_DIR
  - ls -l
  - tar -czf "${TRAVIS_OS_NAME}-${TRAVIS_COMMIT_RANGE}-${TRAVIS_BRANCH}.tgz" release
  - echo "${TRAVIS_OS_NAME}-${TRAVIS_COMMIT_RANGE}-${TRAVIS_BRANCH}.tgz => ${DEPLOY_HOST}${DEPLOY_PATH}"
  - export SSHPASS=$DEPLOY_PASS
  - sshpass -e scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -P $DEPLOY_PORT "${TRAVIS_OS_NAME}-${TRAVIS_COMMIT_RANGE}-${TRAVIS_BRANCH}.tgz" $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH
